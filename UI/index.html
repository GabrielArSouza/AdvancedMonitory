<!DOCTYPE html>
<html>
<head>

    <meta charset="UTF-8">
    <title>WebView</title>  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script> 

</head>
<body>    
    <h2>Memory Monitoring</h2>

    <div width="100px" height="50" >
    <canvas id="myChart" width="25" height="5" style="display: block; width: 200px; height: 100px">
        <script type="text/javascript">
       
        var usedMem = 300.0;
        var notUsedMem = 100.0;
        var innactMem = 20.0;

        var file = "/home/gabriel/CÃ³digos/AdvancedMonitory/IO/dados.txt";

        var lineReader = require('linereader');
        lineReader.eachLine(file, function (line, last) {
            
            let str = line;
            let arr = str.split(" | ");

            usedMem = parseFloat(arr[0]);
            notUsedMem = parseFloat(arr[1]);
            innactMem = parseFloat(arr[2]);

            if (last) {
                res.json({ message: 'Importado com sucesso!' });
            }

        });  

        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'doughnut',

            // The data for our dataset
            data: {
                labels: ["Used", "Not Used", "Innactive"],
                datasets: [{
                    label: "Memory Monitoring",
                    backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C"],
                    data: [usedMem, notUsedMem, innactMem],
                }]
            },

            // Configuration options go here
            options: {}
        });

        </script>    
    </canvas>
    </div>

</body>
</html>